{% extends 'page.html.twig' %}

{% block body %}

    <a style="color: black" href="{{ path('prestations_index') }}"> Retour à mes prestations</a>

    <center>
        <div>
    <h1 style="text-align: center; text-decoration: underline">Demande de prestation</h1>

    {{ form_start(form) }}

        <div >
            <label>Nom prestation</label>
            {{ form_widget(form.nomPrestation, { 'attr':{'style':'background-color:#fff3cd;width: 40%; color: black'}    }) }}
        </div>
            <div >
                <label>Séléctionnez une sous catégorie</label>
                {{ form_widget(form.idSousCategorie, { 'attr':{'style':'background-color:#fff3cd;width: 40%; color: black'}    }) }}
            </div>
            <div >
                <label>Séléctionnez votre prestataire</label>
                {{ form_widget(form.idPrestataire, { 'attr':{'style':'background-color:#fff3cd;width: 40%; color: black'}    }) }}
            </div>
            <div >
                <label>Description prestation</label>
                {{ form_widget(form.descriptionPrestation, { 'attr':{'style':'background-color:#fff3cd;width: 40%; color: black'}    }) }}
            </div>
            <div >
                <label>Proposez un prix à votre prestataire</label> <br>
                {{ form_widget(form.prix, { 'attr':{'style':'background-color:#fff3cd;width: 40%; color: black','min':'20'}    }) }}
            </div>
            <div >
                <label>Etat prestation</label>
                {{ form_widget(form.etatPrestation, { 'attr':{'style':'background-color:#fff3cd;width: 40%; color: black'}    }) }}
            </div>
<div>
    <label>Date prestation</label>
    <br>
    {{ form_widget(form.datePrestation, {'id':'date_input', 'attr':{'style':'background-color:#fff3cd;width: 40%'}    }) }}
    <div class="alert alert-danger" style="margin-top: 10px; display: none">
        <strong>Erreur!</strong> La date saisie est invalide.
    </div>
</div>
    <input id="submit_button" type="submit" value="Passer ma demande" class="btn btn-blue btn-form" style="background-color: #fff3cd; color: black"/>
<script>
    $(document).ready(function () {
        var dateValide = true;
        var d = new Date($('#date_input').val());
        var now = new Date();
        $('#submit_button').click(function () {
            console.log("biiiij");
            if (Date.parse(now)> Date.parse(d)){
                $('#date_input').next('.alert').fadeIn();
                dateValide = false;
            }
            else {$('#date_input').next('.alert').fadeOut();
                dateValide = false;}
            return dateValide;
        })
    })
    
</script>



    {{ form_end(form) }}

        </div>
    </center>
{% endblock %}
